"use strict";exports.id=652,exports.ids=[652],exports.modules={82005:(e,t,a)=>{a.d(t,{default:()=>x});var s=a(10326),r=a(17577),i=a(67765),n=a(40381),l=a(45204),c=a(97964),d=a.n(c),o=a(77109),f=a(52117);a(15424);var u=a(46242);(0,u.$)("001837c49f82a4a4d75b3dc0964dc6c76e2d2b77"),(0,u.$)("c1a53f0f37ee773167b45a3bf6a61b76eb07c326");var m=(0,u.$)("ab224d6a6aaea9fdd9ddb9b9a8c9dad0cd2e02f8");let x=({listingId:e,hasFavorited:t})=>{let{status:a}=(0,o.useSession)(),[c,u]=(0,r.useState)(t),x=(0,r.useRef)(t),{mutate:h}=(0,l.D)({mutationFn:m,onError:()=>{x.current=!x.current,u(x.current),n.Am.error("Failed to favorite")}}),p=d()(()=>{h({listingId:e,favorite:x.current})},300),v=(0,r.useCallback)(()=>{p()},[]);return(0,s.jsxs)("button",{type:"button",onClick:e=>{if(e.stopPropagation(),e.preventDefault(),"authenticated"!==a){n.Am.error("Please sign in to favorite the listing!");return}v(),u(e=>!e),x.current=!x.current},className:" relative hover:opacity-80 transition cursor-pointer z-[5] ",children:[s.jsx(i.lo,{size:28,className:"   text-gray-50   absolute   -top-[2px]   -right-[2px]   "}),s.jsx(i.M_L,{size:24,className:(0,f.cn)(c?"fill-rose-500":"fill-neutral-500/70")})]})}},10307:(e,t,a)=>{a.d(t,{default:()=>l});var s=a(10326),r=a(17577),i=a(46226),n=a(52117);let l=({imageSrc:e,fill:t=!1,alt:a,className:l,priority:c=!1,effect:d,sizes:o})=>{let[f,u]=(0,r.useState)(!1);return s.jsx(i.default,{fill:t,className:(0,n.cn)("transition duration-300","zoom"===d&&"scale-95",f?"opacity-100 scale-100":"opacity-0",l),src:e,alt:a,onLoad:()=>u(!0),priority:c,sizes:o,unoptimized:!0})}},63216:(e,t,a)=>{a.d(t,{default:()=>g});var s=a(10326),r=a(17577),i=a(66373),n=a(35047),l=a(45204),c=a(40381),d=a(90329),o=a(60132),f=a(94752),u=a(97862),m=a(13192);let x=({title:e,onConfirm:t,onCloseModal:a,isLoading:r=!1})=>(0,s.jsxs)("div",{className:" flex flex-col gap-3 px-6 py-8 relative",children:[s.jsx("button",{type:"button",className:" p-1 border-0  hover:opacity-70 transition absolute right-3 top-3",onClick:()=>a?.(),children:s.jsx(f.QAE,{size:20})}),s.jsx("h1",{className:"text-[22px] font-bold text-gray-800",children:e}),s.jsx("p",{className:"text-gray-700  text-[16px] leading-[1.6] mb-4",children:"Are you sure you want to do this? It can't be undone."}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-1 h-[40px]",children:[s.jsx(u.Z,{onClick:()=>a?.(),className:"h-full",outline:!0,children:"Cancel"}),s.jsx(u.Z,{onClick:()=>{t(a)},className:"h-full flex items-center justify-center",children:r?s.jsx(m.Z,{}):s.jsx("span",{children:" Confirm"})})]})]});a(15424);var h=a(46242),p=(0,h.$)("db16f98a7dd509dc43fd9fb70035dab959baf639");(0,h.$)("cac5bff2370d361859fcb45ded3a18f9feb290ff"),(0,h.$)("578785c17f7947cb2d65472cb4242c57c8621203"),(0,h.$)("1106a624fc89780734d43596a1878891b0872f57"),(0,h.$)("84b639be183e082fba4d06c9dff2f39883927b92");var v=(0,h.$)("2ad9c02f7138be20aaff203fa989dbdd2c65d88f");let b={"/properties":"Delete property","/trips":"Cancel reservation","/reservations":"Cancel guest reservation"},g=({id:e})=>{let t=(0,n.usePathname)(),{mutate:a}=(0,l.D)({mutationFn:p}),{mutate:f}=(0,l.D)({mutationFn:v}),[u,m]=(0,r.useTransition)();return"/"===t||"/favorites"===t?null:(0,s.jsxs)(o.Z,{children:[(0,s.jsxs)(d.Z,{children:[s.jsx(d.Z.Toggle,{id:"lisiting-menu",className:"w-10 h-10 flex items-center z-5 justify-center",children:s.jsx("button",{type:"button",className:"w-7 h-7 rounded-full bg-neutral-700/50 flex items-center justify-center hover:bg-neutral-700/70 group transition duration-200 z-[5]",children:s.jsx(i.evw,{className:"h-[18px] w-[18px] text-gray-300 transition duration-100 group-hover:text-gray-100 "})})}),s.jsx(d.Z.List,{position:"bottom-left",className:"rounded-md",children:s.jsx(o.Z.Trigger,{name:"confirm-delete",children:s.jsx(d.Z.Button,{className:"text-[14px] rounded-md font-semibold py-[10px] hover:bg-neutral-100 transition",children:b[t]})})})]}),s.jsx(o.Z.Window,{name:"confirm-delete",children:s.jsx(x,{onConfirm:s=>{m(()=>{try{"/properties"===t?a(e,{onSuccess:()=>{s?.(),c.ZP.success("Listing successfully deleted!")}}):("/trips"===t||"/reservations"===t)&&f(e,{onSuccess:()=>{s?.(),c.ZP.success("Reservation successfully cancelled!")}})}catch(e){c.ZP.error("Oops! Something went wrong. Please try again later."),s?.()}})},title:b[t],isLoading:u})})]})}},71539:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(19510);a(71159);var r=a(14984),i=a(57371);let n=({title:e="No exact matches",subtitle:t="Try changing or removing some of your filters.",showReset:a})=>(0,s.jsxs)("div",{className:" h-[60vh] flex flex-col gap-2 justify-center items-center",children:[s.jsx(r.Z,{center:!0,title:e,subtitle:t}),s.jsx("div",{className:"w-48 mt-4",children:a&&s.jsx(i.default,{href:"/",className:"bg-white border-[1px] border-gray-500 text-[#4e4e4e] rounded hover:opacity-80 transition ",children:"Remove all filters"})})]})},14984:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(19510);a(71159);let r=(0,a(68570).createProxy)(String.raw`/home/oussasz/Project/Dz Dari/lugario/components/BackButton.tsx#default`),i=({title:e,subtitle:t,center:a,backBtn:i=!1})=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:a?"text-center":"text-start",children:[s.jsx("h3",{className:"text-2xl font-bold leading-[1.25]",children:e}),s.jsx("p",{className:"font-light text-neutral-500 md:mt-1 mt-2",children:t})]}),i?s.jsx(r,{}):null]})},91859:(e,t,a)=>{a.d(t,{Z:()=>s});let s=(0,a(68570).createProxy)(String.raw`/home/oussasz/Project/Dz Dari/lugario/components/HeartButton.tsx#default`)},4920:(e,t,a)=>{a.d(t,{Z:()=>s});let s=(0,a(68570).createProxy)(String.raw`/home/oussasz/Project/Dz Dari/lugario/components/Image.tsx#default`)},24378:(e,t,a)=>{a.d(t,{Z:()=>o});var s=a(19510);a(71159);var r=a(57371),i=a(33570),n=a(91859),l=a(4920);let c=e=>new Intl.NumberFormat("en-US").format(e),d=(0,a(68570).createProxy)(String.raw`/home/oussasz/Project/Dz Dari/lugario/components/ListingMenu.tsx#default`),o=({data:e,reservation:t,hasFavorited:a})=>{let o;let f=t?t.totalPrice:e?.price;if(t){let e=new Date(t.startDate),a=new Date(t.endDate);o=`${(0,i.WU)(e,"PP")} - ${(0,i.WU)(a,"PP")}`}return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"absolute top-0 left-0 p-3 flex items-center justify-between w-full",children:[s.jsx("div",{className:"z-5",children:s.jsx(d,{id:t?.id||e.id})}),s.jsx("div",{className:"w-[28px] h-[28px] flex items-center justify-center",children:s.jsx(n.Z,{listingId:e.id,hasFavorited:a},e.id)})]}),s.jsx(r.default,{href:`/listings/${e.id}`,className:"col-span-1 cursor-pointer",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[s.jsx("div",{className:" overflow-hidden md:rounded-xl rounded-md",children:s.jsx("div",{className:"aspect-[1/0.95] relative bg-gray-100",children:s.jsx(l.Z,{imageSrc:e.imageSrc,fill:!0,alt:e.title,effect:"zoom",className:"object-cover",sizes:"100vw"})})}),(0,s.jsxs)("span",{className:"font-semibold text-[16px] mt-[4px]",children:[e?.region,", ",e?.country]}),s.jsx("span",{className:"font-light text-neutral-500 text-sm",children:o||e.category}),(0,s.jsxs)("div",{className:"flex flex-row items-baseline gap-1",children:[(0,s.jsxs)("span",{className:"font-bold text-[#444] text-[14px]",children:["$ ",c(f)]}),!t&&s.jsx("span",{className:"font-light",children:"night"})]})]})})]})}},41183:(e,t,a)=>{a.r(t),a.d(t,{$$ACTION_0:()=>d,$$ACTION_1:()=>f,$$ACTION_2:()=>m,getFavoriteListings:()=>u,getFavorites:()=>c,updateFavorite:()=>o});var s=a(24330);a(60166);var r=a(9487),i=a(84848),n=a(57708),l=a(40618);let c=(0,s.j)("573aee30d49bf9c1a8aea2c43b09b3a41110c6c2",d);async function d(){try{let e=await (0,i.t)();if(!e)return[];return(await r.db.favorite.findMany({where:{userId:e.id},select:{listingId:!0}})).map(e=>e.listingId)}catch(e){return[]}}let o=(0,s.j)("476c2e271afa7809c316ac65717a0cf700a3d3d8",f);async function f({listingId:e,favorite:t}){try{let a;if(!e||"string"!=typeof e)throw Error("Invalid ID");let s=await (0,i.t)();if(!s)throw Error("Please sign in to favorite the listing!");return t?(await r.db.favorite.upsert({where:{userId_listingId:{userId:s.id,listingId:e}},create:{userId:s.id,listingId:e},update:{}}),a=!0):(await r.db.favorite.deleteMany({where:{userId:s.id,listingId:e}}),a=!1),(0,n.revalidatePath)("/"),(0,n.revalidatePath)(`/listings/${e}`),(0,n.revalidatePath)("/favorites"),{hasFavorited:a}}catch(e){throw Error(e.message)}}let u=(0,s.j)("db2f0e26ed6c20fadfc94ebc5160fc769b450ad9",m);async function m(){try{let e=await (0,i.t)();if(!e)return[];return await r.db.listing.findMany({where:{favoritedBy:{some:{userId:e.id}}}})}catch(e){throw Error(e.message)}}(0,l.h)([c,o,u]),(0,s.j)("c1a53f0f37ee773167b45a3bf6a61b76eb07c326",c),(0,s.j)("ab224d6a6aaea9fdd9ddb9b9a8c9dad0cd2e02f8",o),(0,s.j)("001837c49f82a4a4d75b3dc0964dc6c76e2d2b77",u)},10692:(e,t,a)=>{a.d(t,{t:()=>u});var s=a(43153),r=a(67096),i=a.n(r),n=a(12458),l=a(34413),c=a(85876),d=a(38387),o=a(88296);let f={adapter:(0,n.N)(o.db),providers:[(0,d.Z)({clientId:process.env.GITHUB_CLIENT_ID,clientSecret:process.env.GITHUB_CLIENT_SECRET}),(0,c.Z)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}),(0,l.Z)({name:"credentials",credentials:{email:{label:"email",type:"text"},password:{label:"password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)throw Error("Invalid credentials");let t=await o.db.user.findUnique({where:{email:e.email}});if(!t||!t?.password||!await i().compare(e.password,t.password))throw Error("Invalid credentials");return t}})],callbacks:{session:async({token:e,session:t})=>(e&&(t.user.id=e.id,t.user.name=e.name,t.user.email=e.email),t),jwt:async({token:e,user:t})=>t?{...e,...t}:e},pages:{signIn:"/"},session:{strategy:"jwt"},secret:process.env.NEXTAUTH_SECRET},u=async()=>{let e=await (0,s.getServerSession)(f);return e?.user}},33408:(e,t,a)=>{a.d(t,{UM:()=>i});var s=a(73997),r=a(58544);s.Paj,s.f$3,s.sHf,s.dKE,s.Yfi,s.KfF,s.Nzl,s.eAf,s.Yqy,s.jsv,s.I4E,s.rhR,s.vc9,r.Q7H,s.Ys1,s.IB_,s.bVG,s.yEz,s.XG1,s.eVG,s.WKE,s.h9I,s.fC4;let i=16},57481:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var s=a(66621);let r=e=>[{type:"image/x-icon",sizes:"256x256",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};