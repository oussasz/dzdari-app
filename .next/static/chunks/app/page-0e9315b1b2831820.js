(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931,664,633,535],{58686:function(e,s,t){Promise.resolve().then(t.bind(t,86588)),Promise.resolve().then(t.bind(t,31451)),Promise.resolve().then(t.bind(t,23610)),Promise.resolve().then(t.bind(t,23054)),Promise.resolve().then(t.bind(t,10961)),Promise.resolve().then(t.t.bind(t,72972,23)),Promise.resolve().then(t.bind(t,41208))},10961:function(e,s,t){"use strict";t.d(s,{default:function(){return v}});var l=t(57437),i=t(2265),n=t(36766),r=t(27648),a=t(66009),d=t(41208),o=t(31451),c=t(23610),x=t(20698),u=t(23054),h=e=>{let s,{data:t,reservation:i,hasFavorited:n}=e,d=i?i.totalPrice:null==t?void 0:t.price;if(i){let e=new Date(i.startDate),t=new Date(i.endDate);s="".concat((0,a.WU)(e,"PP")," - ").concat((0,a.WU)(t,"PP"))}return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("div",{className:"absolute top-0 left-0 p-3 flex items-center justify-between w-full",children:[(0,l.jsx)("div",{className:"z-5",children:(0,l.jsx)(u.default,{id:(null==i?void 0:i.id)||t.id})}),(0,l.jsx)("div",{className:"w-[28px] h-[28px] flex items-center justify-center",children:(0,l.jsx)(o.default,{listingId:t.id,hasFavorited:n},t.id)})]}),(0,l.jsx)(r.default,{href:"/listings/".concat(t.id),className:"col-span-1 cursor-pointer",children:(0,l.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,l.jsx)("div",{className:" overflow-hidden md:rounded-xl rounded-md",children:(0,l.jsx)("div",{className:"aspect-[1/0.95] relative bg-gray-100",children:(0,l.jsx)(c.default,{imageSrc:t.imageSrc,fill:!0,alt:t.title,effect:"zoom",className:"object-cover",sizes:"100vw"})})}),(0,l.jsxs)("span",{className:"font-semibold text-[16px] mt-[4px]",children:[null==t?void 0:t.region,", ",null==t?void 0:t.country]}),(0,l.jsx)("span",{className:"font-light text-neutral-500 text-sm",children:s||t.category}),(0,l.jsxs)("div",{className:"flex flex-row items-baseline gap-1",children:[(0,l.jsxs)("span",{className:"font-bold text-[#444] text-[14px]",children:["$ ",(0,x.T)(d)]}),!i&&(0,l.jsx)("span",{className:"font-light",children:"night"})]})]})})]})};let f=()=>(0,l.jsx)("div",{className:"col-span-1 ",children:(0,l.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,l.jsx)(d.default,{width:"100%",height:"100%",borderRadius:"12px",className:"aspect-square"}),(0,l.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,l.jsx)(d.default,{height:"18px",width:"84px"}),(0,l.jsx)(d.default,{height:"18px",width:"84px"})]}),(0,l.jsx)(d.default,{height:"16px",width:"102px"}),(0,l.jsx)(d.default,{height:"18px",width:"132px"})]})}),m=(e,s,t,l)=>{let n=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let i=new IntersectionObserver(i=>{i[0].isIntersecting&&!t&&s&&!l&&e()},{root:null,rootMargin:"240px",threshold:.1});return n.current&&i.observe(n.current),()=>i.disconnect()},[s,l,t,e]),{ref:n}};var v=e=>{let{nextCursor:s,fnArgs:t,queryFn:r,queryKey:a,favorites:d}=e,{data:o,isFetchingNextPage:c,hasNextPage:x,status:u,fetchNextPage:v}=(0,n.N)({queryFn:e=>{let{pageParam:l=s}=e;return r({...t,cursor:l})},queryKey:a,getNextPageParam:e=>null==e?void 0:e.nextCursor}),{ref:p}=m(v,x,"loading"===u||c,"error"===u);return(0,l.jsxs)(l.Fragment,{children:[null==o?void 0:o.pages.map((e,s)=>{var t;return(0,l.jsx)(i.Fragment,{children:null==e?void 0:null===(t=e.listings)||void 0===t?void 0:t.map(e=>{var s;let t=d.includes(e.id);return(0,l.jsx)(h,{data:e,hasFavorited:t,reservation:null==e?void 0:e.reservation},(null==e?void 0:null===(s=e.reservation)||void 0===s?void 0:s.id)||e.id)})},s)}),("loading"===u||c)&&(0,l.jsx)(l.Fragment,{children:Array.from({length:4}).map((e,s)=>(0,l.jsx)(f,{},s))}),"error"===u&&(0,l.jsx)("p",{className:"text-xl mt-8 text-center font-semibold",children:"Something went wrong!"}),(0,l.jsx)("div",{ref:p})]})}}},function(e){e.O(0,[582,115,712,400,447,787,373,177,937,403,971,117,744],function(){return e(e.s=58686)}),_N_E=e.O()}]);