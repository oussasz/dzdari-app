"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{86588:function(e,t,n){n.d(t,{default:function(){return i}});var r=n(57437);n(2265);var s=n(77763),a=n(99376);let o=()=>{let e=(0,a.useRouter)();return()=>e.back()};var i=()=>{let e=o();return(0,r.jsxs)("button",{type:"button",className:"flex flex-row gap-2 items-center text-[15px] font-semibold py-2 px-4 rounded-full hover:bg-neutral-100 transition cursor-pointer text-[#585858]",onClick:e,children:[(0,r.jsx)(s.dWm,{size:18}),(0,r.jsx)("span",{children:"Back"})]})}},64392:function(e,t,n){var r=n(57437);n(2265);var s=n(20698);t.Z=e=>{let{children:t,className:n,size:a="small",outline:o=!1,...i}=e;return(0,r.jsx)("button",{className:(0,s.cn)("disabled:opacity-70 disabled:cursor-not-allowed rounded hover:opacity-80 transition w-full bg-rose-500 border-rose-500 text-white py-[8px] ","small"===a?" text-[16px] font-medium border-[1px]":" text-[18px] font-semibold border-2",o?"bg-white border-[1px] border-gray-500 text-[#4e4e4e]":"bg-rose-500 border-rose-500 text-white",n),...i,children:t})}},31451:function(e,t,n){n.d(t,{default:function(){return p}});var r=n(57437),s=n(2265),a=n(48053),o=n(69064),i=n(52884),l=n(14123),c=n.n(l),u=n(80605),d=n(20698);n(83079);var f=n(12119);(0,f.$)("001837c49f82a4a4d75b3dc0964dc6c76e2d2b77"),(0,f.$)("c1a53f0f37ee773167b45a3bf6a61b76eb07c326");var x=(0,f.$)("ab224d6a6aaea9fdd9ddb9b9a8c9dad0cd2e02f8"),p=e=>{let{listingId:t,hasFavorited:n}=e,{status:l}=(0,u.useSession)(),[f,p]=(0,s.useState)(n),m=(0,s.useRef)(n),{mutate:h}=(0,i.D)({mutationFn:x,onError:()=>{m.current=!m.current,p(m.current),o.Am.error("Failed to favorite")}}),b=c()(()=>{h({listingId:t,favorite:m.current})},300),v=(0,s.useCallback)(()=>{b()},[]);return(0,r.jsxs)("button",{type:"button",onClick:e=>{if(e.stopPropagation(),e.preventDefault(),"authenticated"!==l){o.Am.error("Please sign in to favorite the listing!");return}v(),p(e=>!e),m.current=!m.current},className:" relative hover:opacity-80 transition cursor-pointer z-[5] ",children:[(0,r.jsx)(a.lo,{size:28,className:"   text-gray-50   absolute   -top-[2px]   -right-[2px]   "}),(0,r.jsx)(a.M_L,{size:24,className:(0,d.cn)(f?"fill-rose-500":"fill-neutral-500/70")})]})}},23610:function(e,t,n){var r=n(57437),s=n(2265),a=n(33145),o=n(20698);t.default=e=>{let{imageSrc:t,fill:n=!1,alt:i,className:l,priority:c=!1,effect:u,sizes:d}=e,[f,x]=(0,s.useState)(!1);return(0,r.jsx)(a.default,{fill:n,className:(0,o.cn)("transition duration-300","zoom"===u&&"scale-95",f?"opacity-100 scale-100":"opacity-0",l),src:t,alt:i,onLoad:()=>x(!0),priority:c,sizes:d,unoptimized:!0})}},23054:function(e,t,n){n.d(t,{default:function(){return y}});var r=n(57437),s=n(2265),a=n(32970),o=n(99376),i=n(52884),l=n(69064),c=n(78076),u=n(71151),d=n(97230),f=n(64392),x=n(57212),p=e=>{let{title:t,onConfirm:n,onCloseModal:s,isLoading:a=!1}=e;return(0,r.jsxs)("div",{className:" flex flex-col gap-3 px-6 py-8 relative",children:[(0,r.jsx)("button",{type:"button",className:" p-1 border-0  hover:opacity-70 transition absolute right-3 top-3",onClick:()=>null==s?void 0:s(),children:(0,r.jsx)(d.QAE,{size:20})}),(0,r.jsx)("h1",{className:"text-[22px] font-bold text-gray-800",children:t}),(0,r.jsx)("p",{className:"text-gray-700  text-[16px] leading-[1.6] mb-4",children:"Are you sure you want to do this? It can't be undone."}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-1 h-[40px]",children:[(0,r.jsx)(f.Z,{onClick:()=>null==s?void 0:s(),className:"h-full",outline:!0,children:"Cancel"}),(0,r.jsx)(f.Z,{onClick:()=>{n(s)},className:"h-full flex items-center justify-center",children:a?(0,r.jsx)(x.Z,{}):(0,r.jsx)("span",{children:" Confirm"})})]})]})};n(83079);var m=n(12119),h=(0,m.$)("db16f98a7dd509dc43fd9fb70035dab959baf639");(0,m.$)("cac5bff2370d361859fcb45ded3a18f9feb290ff"),(0,m.$)("578785c17f7947cb2d65472cb4242c57c8621203"),(0,m.$)("1106a624fc89780734d43596a1878891b0872f57"),(0,m.$)("84b639be183e082fba4d06c9dff2f39883927b92");var b=(0,m.$)("2ad9c02f7138be20aaff203fa989dbdd2c65d88f");let v={"/properties":"Delete property","/trips":"Cancel reservation","/reservations":"Cancel guest reservation"};var y=e=>{let{id:t}=e,n=(0,o.usePathname)(),{mutate:d}=(0,i.D)({mutationFn:h}),{mutate:f}=(0,i.D)({mutationFn:b}),[x,m]=(0,s.useTransition)();return"/"===n||"/favorites"===n?null:(0,r.jsxs)(u.Z,{children:[(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(c.Z.Toggle,{id:"lisiting-menu",className:"w-10 h-10 flex items-center z-5 justify-center",children:(0,r.jsx)("button",{type:"button",className:"w-7 h-7 rounded-full bg-neutral-700/50 flex items-center justify-center hover:bg-neutral-700/70 group transition duration-200 z-[5]",children:(0,r.jsx)(a.evw,{className:"h-[18px] w-[18px] text-gray-300 transition duration-100 group-hover:text-gray-100 "})})}),(0,r.jsx)(c.Z.List,{position:"bottom-left",className:"rounded-md",children:(0,r.jsx)(u.Z.Trigger,{name:"confirm-delete",children:(0,r.jsx)(c.Z.Button,{className:"text-[14px] rounded-md font-semibold py-[10px] hover:bg-neutral-100 transition",children:v[n]})})})]}),(0,r.jsx)(u.Z.Window,{name:"confirm-delete",children:(0,r.jsx)(p,{onConfirm:e=>{m(()=>{try{"/properties"===n?d(t,{onSuccess:()=>{null==e||e(),l.ZP.success("Listing successfully deleted!")}}):("/trips"===n||"/reservations"===n)&&f(t,{onSuccess:()=>{null==e||e(),l.ZP.success("Reservation successfully cancelled!")}})}catch(t){l.ZP.error("Oops! Something went wrong. Please try again later."),null==e||e()}})},title:v[n],isLoading:x})})]})}},57212:function(e,t,n){var r=n(57437),s=n(26615);n(2265),t.Z=e=>{let{className:t}=e;return(0,r.jsx)(s.sOR,{className:"w-5 h-5 animate-spin ".concat(t)})}},78076:function(e,t,n){var r=n(57437),s=n(2265),a=n(5095),o=n(60429),i=n(78394),l=n(56579),c=n(20698),u=n(72772);let d=(0,s.createContext)({openId:"",setOpenId:e=>{},close:()=>{}}),f=e=>{let{children:t}=e,[n,a]=(0,s.useState)("");return(0,r.jsx)(d.Provider,{value:{openId:n,setOpenId:a,close:()=>a("")},children:(0,r.jsx)("div",{className:"flex items-center justify-end relative rounded-md",children:t})})};f.Toggle=e=>{let{children:t,id:n,className:a}=e,{setOpenId:o,close:i,openId:l}=(0,s.useContext)(d);return(0,r.jsx)(r.Fragment,{children:(0,s.cloneElement)(t,{onClick:e=>{e.preventDefault(),e.stopPropagation(),""===l||l!==n?o(n):i()}})})},f.Button=e=>{let{children:t,onClick:n,className:a}=e,{close:o}=(0,s.useContext)(d);return(0,r.jsx)("li",{className:"w-full",children:(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),e.preventDefault(),o(),null==n||n(e)},type:"button",className:(0,c.cn)("text-left px-4 py-3 w-full",a),children:t})})},f.List=e=>{let{children:t,className:n,position:f="bottom-right"}=e,{openId:x,close:p}=(0,s.useContext)(d),{ref:m}=(0,i.O)({action:p,listenCapturing:!1,enable:!!x});return(0,u.K)({key:"Escape",action:p,enable:!!x}),(0,r.jsx)(a.M,{children:x?(0,r.jsx)(o.E.ul,{ref:m,variants:(0,l.kr)(.85,.175),initial:"hidden",animate:"show",exit:"hidden",style:{originY:0},className:(0,c.cn)("absolute top-[110%]  w-max min-w-[170px] bg-white rounded-sm z-[9999] text-[12px] overflow-hidden ",n,"bottom-left"===f?"left-0":"right-0"),children:t}):null})},t.Z=f},71151:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(57437),s=n(2265),a=n(5095),o=n(60429),i=n(97230),l=n(54887),c=n(78394);let u=()=>{let[e,t]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{t(!0)},[]),e};var d=n(72772),f=n(56579);let x=(0,s.createContext)({open:e=>{},close:()=>{},openName:""}),p=e=>{let{children:t}=e,[n,a]=(0,s.useState)(""),o=(0,s.useCallback)(()=>{a("")},[]);return(0,r.jsx)(x.Provider,{value:{open:a,close:o,openName:n},children:t})};p.Trigger=e=>{let{children:t,name:n}=e,{open:r}=(0,s.useContext)(x);return(0,s.cloneElement)(t,{onClick:e=>{r(n)}})},p.Window=e=>{let{children:t,name:n}=e,{openName:i,close:p}=(0,s.useContext)(x),m=i===n,{ref:h}=(0,c.O)({action:p,enable:m});(0,d.K)({key:"Escape",action:p,enable:m});let b=u();return((0,s.useEffect)(()=>{if(!b)return;let e=document.body,t=document.documentElement;if(m){let n=t.scrollTop;e.style.top="-".concat(n,"px"),e.classList.add("no-scroll")}else{let n=-1*parseFloat(e.style.top);e.classList.remove("no-scroll"),n&&(t.scrollTop=n,e.style.top="")}},[b,m]),b)?(0,l.createPortal)((0,r.jsx)(a.M,{children:m?(0,r.jsx)(o.E.div,{variants:f.Ji,animate:"show",initial:"hidden",exit:"hidden",className:"justify-center items-center flex w-full h-full overflow-hidden  fixed inset-0 z-50 outline-none focus:outline-none bg-neutral-800/70",children:(0,r.jsx)("div",{className:"relative ",children:(0,r.jsx)(o.E.div,{variants:(0,f.Ym)("up","tween",.3),initial:"hidden",animate:"show",exit:"hidden",className:"md:h-auto h-screen md:max-h-screen overflow-y-auto rounded-lg shadow-lg w-screen bg-white md:w-[420px]",ref:h,children:(0,s.cloneElement)(t,{onCloseModal:p})})})}):null}),document.body):null},p.WindowHeader=e=>{let{title:t}=e,{close:n}=(0,s.useContext)(x);return(0,r.jsxs)("header",{className:" flex items-center  px-6 py-3  rounded-t justify-center relative border-b-[1px]",children:[(0,r.jsx)("button",{type:"button",className:" p-1 border-0  hover:opacity-70 transition absolute left-6",onClick:n,children:(0,r.jsx)(i.QAE,{size:18})}),(0,r.jsx)("h4",{className:"text-[18px] font-semibold",children:t})]})};var m=p},72772:function(e,t,n){n.d(t,{K:function(){return s}});var r=n(2265);let s=e=>{let{key:t,action:n,enable:s=!0}=e;(0,r.useEffect)(()=>{let e=e=>{e.key===t&&n(e)};return s?window.addEventListener("keydown",e):window.removeEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n,t,s])}},78394:function(e,t,n){n.d(t,{O:function(){return s}});var r=n(2265);let s=e=>{let{action:t,listenCapturing:n=!0,enable:s=!0}=e,a=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=e=>{a.current&&!a.current.contains(e.target)&&t(e)};return s?document.addEventListener("click",e,n):document.removeEventListener("click",e,n),()=>document.removeEventListener("click",e,n)},[t,n,s]),{ref:a}}},20698:function(e,t,n){n.d(t,{T:function(){return a},cn:function(){return o}});var r=n(61994),s=n(53335);let a=e=>new Intl.NumberFormat("en-US").format(e);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}},56579:function(e,t,n){n.d(t,{Ji:function(){return s},Ym:function(){return a},kr:function(){return r}});let r=(e,t)=>({hidden:{opacity:0,scale:e,transition:{duration:t,ease:"easeOut"}},show:{opacity:1,scale:1,transition:{duration:t,ease:"easeOut"}}}),s={hidden:{opacity:0,transition:{duration:.15,type:"tween",ease:"easeIn"}},show:{opacity:1,transition:{duration:.15,type:"tween",ease:"easeIn"}}},a=(e,t,n)=>({hidden:{x:"left"===e?"-100%":"right"===e?"100%":0,y:"up"===e?"100%":"down"===e?"-100%":0,opacity:0,transition:{duration:n,type:t,ease:"easeOut"}},show:{x:0,y:0,opacity:1,transition:{type:t,duration:n,ease:"easeInOut"}}})}}]);