"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[324],{68184:function(e,t,l){var r=l(57437);l(2265);var n=l(25125),i=l(27648),s=l(38706);t.default=e=>{let{title:t,subtitle:l,showReset:a}=e,o=(0,s.T)("Empty"),c=null!=t?t:o("noExactMatches"),d=null!=l?l:o("tryChangeFilters");return(0,r.jsxs)("div",{className:" h-[60vh] flex flex-col gap-2 justify-center items-center",children:[(0,r.jsx)(n.Z,{center:!0,title:c,subtitle:d}),(0,r.jsx)("div",{className:"w-48 mt-4",children:a&&(0,r.jsx)(i.default,{href:"/",className:"bg-white border-[1px] border-gray-500 text-[#4e4e4e] rounded hover:opacity-80 transition ",children:o("removeAllFilters")})})]})}},31451:function(e,t,l){l.d(t,{default:function(){return p}});var r=l(57437),n=l(2265),i=l(48053),s=l(69064),a=l(52884),o=l(14123),c=l.n(o),d=l(80605),u=l(20698);l(83079);var f=l(12119);(0,f.$)("001837c49f82a4a4d75b3dc0964dc6c76e2d2b77"),(0,f.$)("c1a53f0f37ee773167b45a3bf6a61b76eb07c326");var x=(0,f.$)("ab224d6a6aaea9fdd9ddb9b9a8c9dad0cd2e02f8"),p=e=>{let{listingId:t,hasFavorited:l}=e,{status:o}=(0,d.useSession)(),[f,p]=(0,n.useState)(l),h=(0,n.useRef)(l),{mutate:m}=(0,a.D)({mutationFn:x,onError:()=>{h.current=!h.current,p(h.current),s.Am.error("Failed to favorite")}}),g=c()(()=>{m({listingId:t,favorite:h.current})},300),v=(0,n.useCallback)(()=>{g()},[]);return(0,r.jsxs)("button",{type:"button",onClick:e=>{if(e.stopPropagation(),e.preventDefault(),"authenticated"!==o){s.Am.error("Please sign in to favorite the listing!");return}v(),p(e=>!e),h.current=!h.current},className:" relative hover:opacity-80 transition cursor-pointer z-[5] ",children:[(0,r.jsx)(i.lo,{size:28,className:"   text-gray-50   absolute   -top-[2px]   -right-[2px]   "}),(0,r.jsx)(i.M_L,{size:24,className:(0,u.cn)(f?"fill-rose-500":"fill-neutral-500/70")})]})}},23610:function(e,t,l){var r=l(57437),n=l(2265),i=l(33145),s=l(20698);t.default=e=>{let{imageSrc:t,fill:l=!1,alt:a,className:o,priority:c=!1,effect:d,sizes:u}=e,[f,x]=(0,n.useState)(!1);return(0,r.jsx)(i.default,{fill:l,className:(0,s.cn)("transition duration-300","zoom"===d&&"scale-95",f?"opacity-100 scale-100":"opacity-0",o),src:t,alt:a,onLoad:()=>x(!0),priority:c,sizes:u,unoptimized:!0})}},28927:function(e,t,l){l.d(t,{T:function(){return _},default:function(){return L}});var r=l(57437),n=l(2265),i=l(27648),s=l(66009),a=l(41208),o=l(69234),c=l(38706),d=l(31451),u=l(23610),f=l(20698),x=l(32970),p=l(99376),h=l(52884),m=l(69064),g=l(78076),v=l(71151),b=l(97230),j=l(25523),y=l(57212),N=e=>{let{title:t,onConfirm:l,onCloseModal:n,isLoading:i=!1}=e;return(0,r.jsxs)("div",{className:" flex flex-col gap-3 px-6 py-8 relative",children:[(0,r.jsx)("button",{type:"button",className:" p-1 border-0  hover:opacity-70 transition absolute right-3 top-3",onClick:()=>null==n?void 0:n(),children:(0,r.jsx)(b.QAE,{size:20})}),(0,r.jsx)("h1",{className:"text-[22px] font-bold text-gray-800",children:t}),(0,r.jsx)("p",{className:"text-gray-700  text-[16px] leading-[1.6] mb-4",children:"Are you sure you want to do this? It can't be undone."}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-1 h-[40px]",children:[(0,r.jsx)(j.Z,{onClick:()=>null==n?void 0:n(),className:"h-full",outline:!0,children:"Cancel"}),(0,r.jsx)(j.Z,{onClick:()=>{l(n)},className:"h-full flex items-center justify-center",children:i?(0,r.jsx)(y.Z,{}):(0,r.jsx)("span",{children:" Confirm"})})]})]})},w=l(12685),Z=l(30310),C=l(59255);let D={value:"DZ",label:"Algeria",flag:"\uD83C\uDDE9\uD83C\uDDFF"},P=e=>e?e.split(",").map(e=>e.trim()).filter(Boolean):[],S=e=>{var t;if(!e)return"";let l=C.find(t=>(null==t?void 0:t.nameFr)===e||(null==t?void 0:t.nameAr)===e);return null!==(t=null==l?void 0:l.code)&&void 0!==t?t:""},z=(e,t)=>{let l=(()=>{if(!e)return null;try{let t=JSON.parse(e);return Array.isArray(t)?t.map(e=>String(e)).filter(Boolean):null}catch(e){return null}})();return l&&l.length?l.slice(0,5):t?[t]:[]};var F=e=>{let{listingId:t,onCloseModal:l}=e,[i,s]=(0,n.useTransition)(),[a,o]=(0,n.useState)(null);(0,n.useEffect)(()=>{s(async()=>{try{var e,r,n,i,s,a,c,d,u,f,x;let l=await (0,Z.Cy)(t),p=S(l.region),h=l.latitude,m=l.longitude,g="number"==typeof h&&"number"==typeof m;o({duration:null!==(e=l.duration)&&void 0!==e?e:"",category:null!==(r=l.category)&&void 0!==r?r:"",features:P(l.features),location:g&&l.region?{...D,label:null!==(n=l.country)&&void 0!==n?n:D.label,region:l.region,latlng:[h,m]}:null,wilayaCode:p,municipality:null!==(i=l.municipality)&&void 0!==i?i:"",address:null!==(s=l.address)&&void 0!==s?s:"",guestCount:null!==(a=l.guestCount)&&void 0!==a?a:1,bathroomCount:null!==(c=l.bathroomCount)&&void 0!==c?c:1,roomCount:null!==(d=l.roomCount)&&void 0!==d?d:1,images:z(null!==(u=l.images)&&void 0!==u?u:null,l.imageSrc),price:null!=l.price?String(l.price):"",title:null!==(f=l.title)&&void 0!==f?f:"",description:null!==(x=l.description)&&void 0!==x?x:""})}catch(e){m.ZP.error((null==e?void 0:e.message)||"Failed to load listing"),null==l||l()}})},[t,l]);let c=(0,n.useMemo)(()=>(0,r.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,r.jsx)(v.Z.WindowHeader,{title:"Edit property"}),(0,r.jsx)("div",{className:"p-6 flex items-center justify-center",children:(0,r.jsx)(y.Z,{})})]}),[]);return a?(0,r.jsx)(w.Z,{mode:"edit",listingId:t,initialValues:a,onCloseModal:l}):c};l(83079);var T=l(12119),k=(0,T.$)("db16f98a7dd509dc43fd9fb70035dab959baf639");(0,T.$)("cac5bff2370d361859fcb45ded3a18f9feb290ff"),(0,T.$)("578785c17f7947cb2d65472cb4242c57c8621203"),(0,T.$)("1106a624fc89780734d43596a1878891b0872f57"),(0,T.$)("84b639be183e082fba4d06c9dff2f39883927b92");var A=(0,T.$)("2ad9c02f7138be20aaff203fa989dbdd2c65d88f");let E={"/properties":"Delete property","/trips":"Cancel reservation","/reservations":"Cancel guest reservation"},W=e=>e?"/"===e?"/":e.replace(/\/+$/,""):"";var $=e=>{let{id:t}=e,l=W((0,p.usePathname)()),i=l.endsWith("/favorites"),s=l.endsWith("/properties"),a=l.endsWith("/trips"),o=l.endsWith("/reservations"),c=s?E["/properties"]:a?E["/trips"]:o?E["/reservations"]:"",{mutate:d}=(0,h.D)({mutationFn:k}),{mutate:u}=(0,h.D)({mutationFn:A}),[f,b]=(0,n.useTransition)();return"/"!==l&&!i&&(s||a||o)?(0,r.jsxs)(v.Z,{children:[(0,r.jsxs)(g.Z,{children:[(0,r.jsx)(g.Z.Toggle,{id:"lisiting-menu",className:"w-10 h-10 flex items-center z-5 justify-center",children:(0,r.jsx)("button",{type:"button",className:"w-7 h-7 rounded-full bg-neutral-700/50 flex items-center justify-center hover:bg-neutral-700/70 group transition duration-200 z-[5]",children:(0,r.jsx)(x.evw,{className:"h-[18px] w-[18px] text-gray-300 transition duration-100 group-hover:text-gray-100 "})})}),(0,r.jsxs)(g.Z.List,{position:"bottom-left",className:"rounded-md",children:[s?(0,r.jsx)(v.Z.Trigger,{name:"edit-listing",children:(0,r.jsx)(g.Z.Button,{className:"text-[14px] rounded-md font-semibold py-[10px] hover:bg-neutral-100 transition",children:"Edit property"})}):null,(0,r.jsx)(v.Z.Trigger,{name:"confirm-delete",children:(0,r.jsx)(g.Z.Button,{className:"text-[14px] rounded-md font-semibold py-[10px] hover:bg-neutral-100 transition",children:c})})]})]}),s?(0,r.jsx)(v.Z.Window,{name:"edit-listing",children:(0,r.jsx)(F,{listingId:t})}):null,(0,r.jsx)(v.Z.Window,{name:"confirm-delete",children:(0,r.jsx)(N,{onConfirm:e=>{b(()=>{try{s?d(t,{onSuccess:()=>{null==e||e(),m.ZP.success("Listing successfully deleted!")}}):(a||o)&&u(t,{onSuccess:()=>{null==e||e(),m.ZP.success("Reservation successfully cancelled!")}})}catch(t){m.ZP.error("Oops! Something went wrong. Please try again later."),null==e||e()}})},title:c,isLoading:f})})]}):null},M=l(21099),L=e=>{let t,{data:l,reservation:n,hasFavorited:a}=e,x=(0,o.bU)(),p=(0,c.T)("Listing"),h=(0,c.T)("PurposeOptions"),m=n?n.totalPrice:null==l?void 0:l.price;if(n){let e=new Date(n.startDate),l=new Date(n.endDate);t="".concat((0,s.WU)(e,"PP")," - ").concat((0,s.WU)(l,"PP"))}let g=(()=>{let e=M.KP.find(e=>e.label===l.category);return e?h("".concat(e.id,".label")):l.category})(),v=(()=>{let e=l.images;if("string"==typeof e&&e)try{let t=JSON.parse(e);if(Array.isArray(t)&&t.length&&"string"==typeof t[0])return t[0]}catch(e){}return l.imageSrc})(),b=()=>{var e;let t=l.duration;if(!t)return null;let r=M.z3.find(e=>e.id===t||e.label===t);return null!==(e=null==r?void 0:r.id)&&void 0!==e?e:null};return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"absolute top-0 left-0 p-3 flex items-center justify-between w-full",children:[(0,r.jsx)("div",{className:"z-5",children:(0,r.jsx)($,{id:(null==n?void 0:n.id)||l.id})}),(0,r.jsx)("div",{className:"w-[28px] h-[28px] flex items-center justify-center",children:(0,r.jsx)(d.default,{listingId:l.id,hasFavorited:a},l.id)})]}),(0,r.jsx)(i.default,{href:"/listings/".concat(l.id),className:"col-span-1 cursor-pointer",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,r.jsx)("div",{className:" overflow-hidden md:rounded-xl rounded-md",children:(0,r.jsx)("div",{className:"aspect-[1/0.95] relative bg-gray-100",children:(0,r.jsx)(u.default,{imageSrc:v,fill:!0,alt:l.title,effect:"zoom",className:"object-cover",sizes:"100vw"})})}),(0,r.jsxs)("span",{className:"font-semibold text-[16px] mt-[4px]",children:[null==l?void 0:l.region,", ",null==l?void 0:l.country]}),(0,r.jsx)("span",{className:"font-light text-neutral-500 text-sm",children:t||g}),(0,r.jsxs)("div",{className:"flex flex-row items-baseline gap-1",children:[(0,r.jsxs)("span",{className:"font-bold text-[#444] text-[14px]",children:["DZD ",(0,f.T)(m,x)]}),!n&&(0,r.jsxs)("span",{className:"font-light",children:["/ ",(()=>{switch(b()){case"byNight":default:return p("night");case"perWeek":return p("week");case"perMonth":return p("month");case"per3Months":return p("threeMonths");case"perYear":return p("year");case"longTerm":return p("longTerm")}})()]})]})]})})]})};let _=()=>(0,r.jsx)("div",{className:"col-span-1 ",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,r.jsx)(a.Z,{width:"100%",height:"100%",borderRadius:"12px",className:"aspect-square"}),(0,r.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,r.jsx)(a.Z,{height:"18px",width:"84px"}),(0,r.jsx)(a.Z,{height:"18px",width:"84px"})]}),(0,r.jsx)(a.Z,{height:"16px",width:"102px"}),(0,r.jsx)(a.Z,{height:"18px",width:"132px"})]})})}}]);