exports.id=312,exports.ids=[312],exports.modules={50103:(e,t,r)=>{Promise.resolve().then(r.bind(r,49589)),Promise.resolve().then(r.bind(r,8825)),Promise.resolve().then(r.bind(r,54655)),Promise.resolve().then(r.bind(r,75675))},75675:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var i=r(10326),a=r(17577),n=r.n(a),s=r(94093),o=r(6162),d=r(54655);let l=(e,t,r,i)=>{let n=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let a=new IntersectionObserver(a=>{a[0].isIntersecting&&!r&&t&&!i&&e()},{root:null,rootMargin:"240px",threshold:.1});return n.current&&a.observe(n.current),()=>a.disconnect()},[t,i,r,e]),{ref:n}},c=({nextCursor:e,fnArgs:t,queryFn:r,queryKey:a,favorites:c})=>{let u=(0,o.T)("Errors"),{data:f,isFetchingNextPage:g,hasNextPage:h,status:m,fetchNextPage:b}=(0,s.N)({queryFn:({pageParam:i=e})=>r({...t,cursor:i}),queryKey:a,getNextPageParam:e=>e?.nextCursor}),{ref:y}=l(b,h,"loading"===m||g,"error"===m);return(0,i.jsxs)(i.Fragment,{children:[f?.pages.map((e,t)=>i.jsx(n().Fragment,{children:e?.listings?.map(e=>{let t=c.includes(e.id);return i.jsx(d.default,{data:e,hasFavorited:t,reservation:e?.reservation},e?.reservation?.id||e.id)})},t)),("loading"===m||g)&&i.jsx(i.Fragment,{children:Array.from({length:4}).map((e,t)=>i.jsx(d.T,{},t))}),"error"===m&&i.jsx("p",{className:"text-xl mt-8 text-center font-semibold",children:u("somethingWentWrong")}),i.jsx("div",{ref:y})]})}},14984:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(19510);r(71159);let a=(0,r(68570).createProxy)(String.raw`/home/oussasz/Project/Dz Dari/lugario/components/BackButton.tsx#default`),n=({title:e,subtitle:t,center:r,backBtn:n=!1})=>(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:r?"text-center":"text-start",children:[i.jsx("h3",{className:"text-2xl font-bold leading-[1.25]",children:e}),i.jsx("p",{className:"font-light text-neutral-500 md:mt-1 mt-2",children:t})]}),n?i.jsx(a,{}):null]})},16757:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(68570).createProxy)(String.raw`/home/oussasz/Project/Dz Dari/lugario/components/LoadMore.tsx#default`)},45247:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$ACTION_0:()=>c,$$ACTION_1:()=>f,$$ACTION_2:()=>h,$$ACTION_3:()=>b,$$ACTION_4:()=>x,createListing:()=>g,getListingById:()=>u,getListings:()=>l,getOwnedListingById:()=>m,updateListing:()=>y});var i=r(27745);r(26461);var a=r(88296),n=r(30207),s=r(33408),o=r(10692),d=r(85723);let l=(0,i.j)("bb5a5113cf8622f83e03f856ce80b496e8dd5e47",c);async function c(e){try{let{userId:t,roomCount:r,guestCount:i,bathroomCount:n,country:o,region:d,municipality:l,startDate:c,endDate:u,category:f,duration:g,feature:h,cursor:m}=e||{},b={};if(t&&(b.userId=t),f){let e=Array.isArray(f)?f:[f];b.category={in:e}}if(g){let e=Array.isArray(g)?g:[g];b.duration={in:e}}if(h){let e=Array.isArray(h)?h:[h];b.AND=[...b.AND??[],...e.map(e=>({features:{contains:e}}))]}r&&(b.roomCount={gte:+r}),i&&(b.guestCount={gte:+i}),n&&(b.bathroomCount={gte:+n}),o&&(b.country=o),d&&(b.region=d),l&&(b.municipality=l),c&&u&&(b.NOT={reservations:{some:{OR:[{endDate:{gte:c},startDate:{lte:c}},{startDate:{lte:u},endDate:{gte:u}}]}}});let y={where:b,take:s.UM,orderBy:{createdAt:"desc"}};m&&(y.cursor={id:m},y.skip=1);let x=await a.db.listing.findMany(y),p=x.length===s.UM?x[s.UM-1].id:null;return{listings:x,nextCursor:p}}catch(e){return{listings:[],nextCursor:null}}}let u=(0,i.j)("bd12bcafed4fce27c9e0d8b6a1be9463e7e7f752",f);async function f(e){return await a.db.listing.findUnique({where:{id:e},include:{user:{select:{name:!0,image:!0}},reservations:{select:{startDate:!0,endDate:!0}}}})}let g=(0,i.j)("067060037a75f005439918d9fa246b510679bcf1",h);async function h(e){let{category:t,duration:r,features:i,location:{region:n,label:s,latlng:d},municipality:l,address:c,guestCount:u,bathroomCount:f,roomCount:g,image:h,images:m,price:b,title:y,description:x}=e;for(let t of["category","duration","location","municipality","address","guestCount","roomCount","bathroomCount","price","title","description"])if(!e[t])throw Error(`Missing required field: ${t}`);let p=Array.isArray(m)?m:"string"==typeof h&&h?[h]:[];if(!p.length)throw Error("At least one image is required");if(p.length>5)throw Error("Maximum 5 images allowed");let w=p[0],v=await (0,o.t)();if(!v)throw Error("Unauthorized!");return await a.db.listing.create({data:{title:y,description:x,imageSrc:w,images:JSON.stringify(p),category:t,duration:r,features:Array.isArray(i)?i.join(","):i||"",roomCount:g,bathroomCount:f,guestCount:u,country:s,region:n,municipality:l,address:c,latitude:d[0],longitude:d[1],price:parseInt(b,10),userId:v.id}})}let m=(0,i.j)("c16e9b0ffa6a408dad2f5997cf326ae06b44b4d1",b);async function b(e){if(!e||"string"!=typeof e)throw Error("Invalid ID");let t=await (0,o.t)();if(!t)throw Error("Unauthorized!");let r=await a.db.listing.findUnique({where:{id:e,userId:t.id}});if(!r)throw Error("Listing not found!");return r}let y=(0,i.j)("d36b29d06e37f5131001fbebc6e7a104ae8d2507",x);async function x(e,t){if(!e||"string"!=typeof e)throw Error("Invalid ID");let r=await (0,o.t)();if(!r)throw Error("Unauthorized!");let{category:i,duration:s,features:d,location:l,municipality:c,address:u,guestCount:f,bathroomCount:g,roomCount:h,image:m,images:b,price:y,title:x,description:p}=t;for(let e of["category","duration","location","municipality","address","guestCount","roomCount","bathroomCount","price","title","description"])if(!t[e])throw Error(`Missing required field: ${e}`);let w=Array.isArray(b)?b:"string"==typeof m&&m?[m]:[];if(!w.length)throw Error("At least one image is required");if(w.length>5)throw Error("Maximum 5 images allowed");let v=w[0],j=l?.region,A=l?.label,I=l?.latlng;if(!j||!A||!Array.isArray(I)||I.length<2)throw Error("Invalid location");if(!(await a.db.listing.updateMany({where:{id:e,userId:r.id},data:{title:x,description:p,imageSrc:v,images:JSON.stringify(w),category:i,duration:s,features:Array.isArray(d)?d.join(","):d||"",roomCount:h,bathroomCount:g,guestCount:f,country:A,region:j,municipality:c,address:u,latitude:I[0],longitude:I[1],price:parseInt(y,10)}})).count)throw Error("Listing not found!");return(0,n.revalidatePath)("/"),(0,n.revalidatePath)("/properties"),(0,n.revalidatePath)("/favorites"),(0,n.revalidatePath)(`/listings/${e}`),{id:e}}(0,d.h)([l,u,g,m,y]),(0,i.j)("a44eac80d9a1a0040b970ea25de7a8d85fcc50a4",l),(0,i.j)("58ed5bbaa85d255292baf8aba25c4a07c7e80a40",u),(0,i.j)("0aa2753f4c5c9e267bdfe41bb6dfd75e8d2cbff6",g),(0,i.j)("64fd960cfd7af4d30707bdefd94da62903576a93",m),(0,i.j)("f71d8aca32bb00c035910ca7953e75596f736162",y)},67738:(e,t,r)=>{"use strict";r.d(t,{UM:()=>n});var i=r(63759),a=r(43758);i.Paj,i.f$3,i.sHf,i.sHf,i.dKE,i.dKE,i.Yfi,i.KfF,i.Nzl,i.eAf,i.Yqy,i.jsv,i.I4E,i.rhR,i.vc9,a.Q7H,i.Ys1,i.IB_,i.bVG,i.yEz,i.XG1,i.eVG,i.WKE,i.h9I,i.fC4;let n=16}};